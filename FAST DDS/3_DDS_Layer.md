# 3.DDS层
eProsima Fast DDS公开了两个不同的 API 来与不同级别的通信服务进行交互。主要的API是数据分发服务（DDS）数据中心发布订阅（DCPS）平台独立模型（PIM）API，简称DDS DCPS PIM ，由数据分发服务（DDS）1.4版规范定义，Fast DDS遵守该规定。本节主要讲解**该API在Fast DDS下的主要特点和使用方式**，并对其分为五个模块进行深入讲解：
- 核心(Core)：它定义了由其他模块重定义的抽象类和接口。它还提供服务质量 (QoS) 定义，以及对基于通知的中间件交互方式的支持。

- 域(Domain)：它包含DomainParticipant充当服务入口点的类，以及许多类的工厂。DomainParticipant还充当组成服务的其他对象的容器。

- 发布器(Publisher)：描述发布端使用的类，包括Publisher和DataWriter类，以及PublisherListener和DataWriterListener接口。

- 订阅器(Subscriber)：描述订阅端使用的类，包括Subscriber和DataReader类，以及SubscriberListener和DataReaderListener接口。

- 主题：描述了用于定义通信主题和数据类型的类，包括Topic和TopicDescription类，以及TypeSupport和TopicListener接口。

- 3.1. 核
  - 3.1.1. 实体
  - 3.1.2. 策略
  - 3.1.3. 状态
  - 3.1.4. 条件和等待时间
- 3.2. 域
    - 3.2.1. 域参与者
    - 3.2.2. 域参与者监听器
    - 3.2.3. 域参与者工厂
    - 3.2.4. 创建域参与者
    - 3.2.5. 分区
- 3.3. 发布器
    - 3.3.1. 发布器
    - 3.3.2. 发布器监听器
    - 3.3.3. 创建发布器
    - 3.3.4. 数据写入器
    - 3.3.5. 数据写入监听器
    - 3.3.6. 创建数据写入器
    - 3.3.7. 发布数据
- 3.4. 订阅器
    - 3.4.1. 订阅器
    - 3.4.2. 订阅器监听器
    - 3.4.3. 创建订阅器
    - 3.4.4. 数据读取器
    - 3.4.5. 数据读取器监听器
    - 3.4.6. 创建数据读取器
    - 3.4.7. 样本信息
    - 3.4.8. 访问接收到的数据
- 3.5. 话题
    - 3.5.1. 话题、键和实例
    - 3.5.2. 话题描述
    - 3.5.3. 话题
    - 3.5.4. 内容过滤主题
    - 3.5.5. 话题监听器
    - 3.5.6. 数据类型的定义
    - 3.5.7. 创建话题
    - 3.5.8. 过滤某个话题的数据
    - 3.5.9. 默认的类似 SQL 的过滤器
    - 3.5.10. 使用自定义过滤器
    - 3.5.11. 过滤应用在哪里：写入方与读取方
    - 3.5.12. 用于数据类型源代码生成的Fast DDS-Gen

## 3.1 核心
该模块定义了其他模块将使用的基础设施类和类型。它包含实体类、QoS 策略和状态的定义。

- 实体：实体是一个 DDS 通信对象，具有状态并且可以配置策略。

- 策略：控制实体行为的每个配置对象。

- 状态：与实体关联的每个对象，其值表示该实体的通信状态。

### 3.1.1.实体
`Entity`是所有 DDS 实体的抽象基类，表示支持 QoS 策略、侦听器和状态的对象。
#### 3.1.1.1.实体类型
- 域参与者：该实体是服务的入口点，充当发布器、订阅器和话题的工厂。有关更多详细信息，请参阅DomainParticipant。

- 发布器：它充当可以创建任意数量的 DataWriter 的工厂。有关详细信息，请参阅发布器。

- 订阅器：它充当可以创建任意数量的 DataReader 的工厂。有关详细信息，请参阅订阅者。

- 主题：该实体介于发布实体和订阅实体之间，充当通道。请参阅主题了解更多详细信息。

- 数据写入器(DataWriter)：是负责数据分发的对象。有关详细信息，请参阅数据写入器。

- 数据读取器(DataReader)：是用于访问接收到的数据的对象。有关详细信息，请参阅DataReader 。

下图显示了所有DDS实体之间的层次结构：

![](https://fast-dds.docs.eprosima.com/en/latest/_images/entity_diagram.svg)

#### 3.1.1.2. 共同实体特征
所有实体类型都共享一些实体概念所共有的特征。那些是：

##### 3.1.1.2.1. 实体标识符
每个实体都由唯一的 ID 来标识，该 ID 在 DDS 实体及其对应的 RTPS 实体（如果存在）之间共享。该 ID 存储在 Entity 基类上声明的   `Instance Handle`对象上，可以使用 getter 函数访问该对象get_instance_handle()。








