# 5.发现
作为一种数据分发服务（DDS）的具体实现，提供了发现机制，允许在域参与者之间自动查找和匹配DataWriters和DataReaders，以便它们可以开始共享数据。对于所有机制，此发现分两个阶段执行。
## 5.1 发现阶段
1. **参与者发现阶段 (PDP)**：在此阶段，域参与者承认彼此的存在。为了实现这一点，每个DomainParticipant都会定期发送`公告消息`，这些消息中包括DomainParticipant监听传入元数据和用户数据流量的单播地址（IP 和端口），以及其他信息。当两个给定的 DomainParticipant 存在于同一 DDS 域中时，它们将匹配。默认情况下，公告消息使用众所周知的`多播`地址和端口（使用 DomainId 计算）发送。此外，可以指定使用`单播`发送公告的地址列表（请参阅初始对等点）。此外，还可以配置此类公告的周期（请参阅发现配置）。
2. **端点发现阶段 (EDP)**：在此阶段，`数据写入器`和`数据读取器`相互确认。为此，DomainParticipants 使用 PDP 期间建立的通信通道相互共享关于各自DataWriter 和 DataReader 的信息。该信息包含`Topic`和`数据类型`等内容（请参阅主题）。为了使两个端点匹配，它们的主题和数据类型必须一致。一旦 DataWriter 和 DataReader 匹配，它们就准备好发送/接收用户数据流量。

`要点`
>可以使用 PDP 阶段来传输有关主机、用户和运行DomainParticipant的进程（物理信息）的信息。有关如何配置传输的物理数据的详细信息，请参阅发现信息中的物理数据。
## 5.2 发现机制
Fast DDS 提供以下发现机制：
- `简单发现`：这是默认机制。它遵循RTPS标准，对PDP和EDP都提供支持，因此与任何其他DDS和RTPS实现都兼容。

- `静态发现`：此机制在 PDP 阶段使用简单参与者发现协议 (SPDP)（如 RTPS 标准所指定），但允许在所有DataWriter和DataReader的IP都已连接时跳过简单端点发现协议 (SEDP) 阶段。端口、数据类型和主题是预先已知的。

- `发现服务器`：此发现机制使用集中式发现架构，其中 DomainParticipant（称为服务器）充当元流量发现的中心。

- `手动发现`：此机制仅与RTPS层兼容。它禁用了PDP，使用户可以使用其选择的任何外部元信息通道手动匹配和取消匹配RTPSParticipants、RTPSReaders和RTPSWriters。因此，用户必须访问由DomainParticipant实现的RTPSParticipant，并直接匹配RTPS实体。
## 5.3.发现设置
以下部分列出并描述了先前定义的每个发现机制可用的`设置`，以及如何定义 DomainParticipantListener `发现回调`。

- 5.3.1.常规发现设置
    - 5.3.1.1.发现协议
    - 5.3.1.2.忽略参与者标志
    - 5.3.1.3.租赁期限
    - 5.3.1.4.公告期间
- 5.3.2.简单的发现设置
    - 5.3.2.1.初步公告
    - 5.3.2.2.简单的 EDP 属性
    - 5.3.2.3.最初的同行
- 5.3.3.静态发现设置
    - 5.3.3.1.静态EDP
    - 5.3.3.2.静态 EDP XML 配置规范
    - 5.3.3.3.检查静态 EDP XML 文件
    - 5.3.3.4.加载静态 EDP XML 文件
- 5.3.4.发现服务器设置
    - 5.3.4.1.关键概念
    - 5.3.4.2.在客户端和服务器之间进行选择
    - 5.3.4.3.GuidPrefix 作为服务器唯一标识符
    - 5.3.4.4.服务器定位器列表
    - 5.3.4.5.微调发现服务器握手
    - 5.3.4.6.在运行时修改远程服务器列表
    - 5.3.4.7.使用名称配置 Discovery Server 定位器
    - 5.3.4.8.完整示例
    - 5.3.4.9.安全
- 5.3.5 DomainParticipantListener 发现回调